"use strict";angular.module("codeBufferApp",[]),angular.module("codeBufferApp").directive("resize",function($window,myLayout){return function(scope,element,attr){var w=angular.element($window),changeHeight=function(){element.css("height",w.height()-35+"px")},changeWidth=function(){element.css("width",w.width()+"px")};w.bind("resize",function(){changeHeight(),changeWidth(),setTimeout(function(){myLayout.updateSize()},10)}),changeHeight(),changeWidth(),setTimeout(function(){myLayout.updateSize()},10)}}),angular.module("codeBufferApp").directive("modes",function(){return{restrict:"AE",templateUrl:"templates/modes.directive.html"}}),angular.module("codeBufferApp").directive("themes",function(){return{restrict:"AE",templateUrl:"templates/themes.directive.html"}}),angular.module("codeBufferApp").directive("menu",function(myLayout,$rootScope){var controller=function($scope){$scope.mode="javascript",$scope.size="14px",$scope.theme="ace/theme/monokai",$scope.addContainer=function(){var componentState={mode:$scope.mode,size:$scope.size,theme:$scope.theme,name:$scope.name};if(myLayout.root.contentItems&&myLayout.root.contentItems.length>0){myLayout.root.contentItems[0].addChild({type:"component",componentName:"example",componentState:componentState})}else{myLayout.root.addChild({type:"component",componentName:"example",componentState:componentState})}}};return{restrict:"AE",templateUrl:"templates/menu.directive.html",controller:controller}}),function(){var myLayout,config={content:[{type:"row"}]},savedState=localStorage.getItem("savedState");myLayout=null!==savedState?new GoldenLayout(JSON.parse(savedState),$("#main")):new GoldenLayout(config,$("#main")),myLayout.on("initialised",function(){angular.bootstrap(document.body,["codeBufferApp"])}),myLayout.registerComponent("example",function(container,state){console.log(state);var editor=ace.edit(container.getElement()[0]);editor.$blockScrolling=1/0,editor.setValue(state.text||"",-1),editor.setTheme(state.theme||"ace/theme/monokai"),editor.session.setMode("ace/mode/"+(state.mode||"javascript")),editor.setOptions({fontSize:state.size||"14px"}),editor.on("change",function(){container.extendState({text:editor.getValue()})}),container.setTitle(state.name||"untitled"),container.on("resize",function(){editor.resize()})}),myLayout.on("stateChanged",function(){var state=JSON.stringify(myLayout.toConfig());localStorage.setItem("savedState",state)}),angular.module("codeBufferApp").value("myLayout",myLayout),myLayout.init()}();